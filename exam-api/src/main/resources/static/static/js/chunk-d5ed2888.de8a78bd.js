(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5ed2888"],{"0468":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"d",(function(){return l})),o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return a}));var n=o("b775");function i(t){return Object(n["b"])("/exam/api/repo/detail",t)}function l(t){return Object(n["b"])("/exam/api/repo/save",t)}function r(t){return Object(n["b"])("/exam/api/repo/list",t)}function a(t){return Object(n["b"])("/exam/api/repo/batch-action",t)}},"09f4":function(t,e,o){"use strict";o.d(e,"a",(function(){return r})),Math.easeInOutQuad=function(t,e,o,n){return t/=n/2,t<1?o/2*t*t+e:(t--,-o/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function i(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(t,e,o){var r=l(),a=t-r,s=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=s;var l=Math.easeInOutQuad(c,r,a,e);i(l),c<e?n(t):o&&"function"===typeof o&&o()};u()}},2934:function(t,e,o){"use strict";o.d(e,"c",(function(){return i})),o.d(e,"b",(function(){return l})),o.d(e,"a",(function(){return r}));var n=o("b775");function i(t,e){return Object(n["b"])(t,e)}function l(t,e){return Object(n["b"])(t,{ids:e})}function r(t,e,o){return Object(n["b"])(t,{ids:e,state:o})}},"39cf":function(t,e,o){},"4ee14":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-steps",{attrs:{active:t.step,simple:""}},[o("el-step",{attrs:{title:"组卷配置",icon:"el-icon-set-up"}}),o("el-step",{attrs:{title:"考试权限",icon:"el-icon-unlock"}}),o("el-step",{attrs:{title:"补充配置",icon:"el-icon-s-tools"}})],1),o("div",{staticStyle:{"margin-top":"20px",width:"100%",height:"40px"}},[t.step>1?o("el-button",{on:{click:t.prevStep}},[t._v("上一步")]):t._e(),o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.nextStep}},[t._v(t._s(3===t.step?"提交保存":"下一步"))])],1),1===t.step?o("el-card",{staticStyle:{"margin-top":"20px"}},[o("el-radio-group",{on:{change:t.joinTypeChane},model:{value:t.postForm.joinType,callback:function(e){t.$set(t.postForm,"joinType",e)},expression:"postForm.joinType"}},[o("el-radio",{attrs:{label:1,border:""}},[t._v("题库组卷")]),o("el-radio",{attrs:{label:2,border:""}},[t._v("自由组卷")])],1),o("div",{staticStyle:{float:"right","font-weight":"bold",color:"#ff0000"}},[t._v("试卷总分："+t._s(t.postForm.totalScore)+"分")]),1===t.postForm.joinType?o("div",{staticStyle:{"margin-top":"15px","padding-top":"20px"}},[o("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-plus"},on:{click:t.handleAdd}},[t._v(" 添加题库 ")]),o("el-table",{staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:t.repoList,border:!1,"empty-text":"请点击上面的`添加题库`进行设置"}},[o("el-table-column",{attrs:{label:"题库",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("repo-select",{attrs:{multi:!1},model:{value:e.row.repoId,callback:function(o){t.$set(e.row,"repoId",o)},expression:"scope.row.repoId"}})]}}],null,!1,450928749)}),o("el-table-column",{attrs:{label:"单选数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.row.radioCount,callback:function(o){t.$set(e.row,"radioCount",o)},expression:"scope.row.radioCount"}})]}}],null,!1,3478659297)}),o("el-table-column",{attrs:{label:"单选分数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.row.radioScore,callback:function(o){t.$set(e.row,"radioScore",o)},expression:"scope.row.radioScore"}})]}}],null,!1,4171831466)}),o("el-table-column",{attrs:{label:"多选数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.row.multiCount,callback:function(o){t.$set(e.row,"multiCount",o)},expression:"scope.row.multiCount"}})]}}],null,!1,1434325145)}),o("el-table-column",{attrs:{label:"多选分数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.row.multiScore,callback:function(o){t.$set(e.row,"multiScore",o)},expression:"scope.row.multiScore"}})]}}],null,!1,442354770)}),o("el-table-column",{attrs:{label:"判断题数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.row.judgeCount,callback:function(o){t.$set(e.row,"judgeCount",o)},expression:"scope.row.judgeCount"}})]}}],null,!1,718431913)}),o("el-table-column",{attrs:{label:"判断题分数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.row.judgeScore,callback:function(o){t.$set(e.row,"judgeScore",o)},expression:"scope.row.judgeScore"}})]}}],null,!1,3693218402)}),o("el-table-column",{attrs:{label:"简答题数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.row.saqCount,callback:function(o){t.$set(e.row,"saqCount",o)},expression:"scope.row.saqCount"}})]}}],null,!1,987748179)}),o("el-table-column",{attrs:{label:"简答题分数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.row.saqScore,callback:function(o){t.$set(e.row,"saqScore",o)},expression:"scope.row.saqScore"}})]}}],null,!1,2461348888)}),o("el-table-column",{attrs:{label:"删除",align:"center",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(o){return t.removeItem(e.$index)}}})]}}],null,!1,1518468532)})],1)],1):t._e(),2===t.postForm.joinType?o("div",{staticStyle:{"margin-top":"15px","padding-top":"20px"}},[o("el-checkbox",{on:{change:function(e){return t.quEnableChange(1,e)}},model:{value:t.quEnable[0],callback:function(e){t.$set(t.quEnable,0,e)},expression:"quEnable[0]"}},[t._v("单选题")]),o("el-checkbox",{on:{change:function(e){return t.quEnableChange(2,e)}},model:{value:t.quEnable[1],callback:function(e){t.$set(t.quEnable,1,e)},expression:"quEnable[1]"}},[t._v("多选题")]),o("el-checkbox",{on:{change:function(e){return t.quEnableChange(3,e)}},model:{value:t.quEnable[2],callback:function(e){t.$set(t.quEnable,2,e)},expression:"quEnable[2]"}},[t._v("判断题")]),o("el-checkbox",{on:{change:function(e){return t.quEnableChange(4,e)}},model:{value:t.quEnable[3],callback:function(e){t.$set(t.quEnable,3,e)},expression:"quEnable[3]"}},[t._v("解答题")]),t.quEnable[0]?o("el-card",{staticStyle:{"margin-top":"20px"}},[o("h3",[t._v("单选题")]),o("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.openJoinDialog(1)}}},[t._v(" 添加小题 ")]),o("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-star-off"},on:{click:function(e){return t.batchScoreDialog(1)}}},[t._v(" 单题分值 ")]),o("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.quList[0]}},[o("el-table-column",{attrs:{label:"序号",type:"index",align:"center","show-overflow-tooltip":"",width:"50px"}}),o("el-table-column",{attrs:{prop:"content",label:"题目内容"}}),o("el-table-column",{attrs:{width:"120px",label:"分值"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.score,callback:function(o){t.$set(e.row,"score",o)},expression:"scope.row.score"}})]}}],null,!1,1765368513)}),o("el-table-column",{attrs:{width:"120px",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(o){return t.removeQuItem(t.quList[0],e.$index)}}})]}}],null,!1,2788852028)})],1)],1):t._e(),t.quEnable[1]?o("el-card",{staticStyle:{"margin-top":"15px"}},[o("h3",[t._v("多选题")]),o("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.openJoinDialog(2)}}},[t._v(" 添加小题 ")]),o("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-star-off"},on:{click:function(e){return t.batchScoreDialog(2)}}},[t._v(" 单题分值 ")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.quList[1]}},[o("el-table-column",{attrs:{label:"序号",type:"index",align:"center","show-overflow-tooltip":"",width:"50px"}}),o("el-table-column",{attrs:{prop:"content",label:"题目内容"}}),o("el-table-column",{attrs:{prop:"score",width:"120px",align:"center",label:"分值"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.score,callback:function(o){t.$set(e.row,"score",o)},expression:"scope.row.score"}})]}}],null,!1,1765368513)}),o("el-table-column",{attrs:{width:"120px",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(o){return t.removeQuItem(t.quList[1],e.$index)}}})]}}],null,!1,1951182589)})],1)],1):t._e(),t.quEnable[2]?o("el-card",{staticStyle:{"margin-top":"15px"}},[o("h3",[t._v("判断题")]),o("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.openJoinDialog(3)}}},[t._v(" 添加小题 ")]),o("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-star-off"},on:{click:function(e){return t.batchScoreDialog(3)}}},[t._v(" 单题分值 ")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.quList[2]}},[o("el-table-column",{attrs:{label:"序号",type:"index",align:"center","show-overflow-tooltip":"",width:"50px"}}),o("el-table-column",{attrs:{prop:"content",label:"题目内容"}}),o("el-table-column",{attrs:{prop:"score",width:"120px",align:"center",label:"分值"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.score,callback:function(o){t.$set(e.row,"score",o)},expression:"scope.row.score"}})]}}],null,!1,1765368513)}),o("el-table-column",{attrs:{width:"120px",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(o){return t.removeQuItem(t.quList[2],e.$index)}}})]}}],null,!1,322626750)})],1)],1):t._e(),t.quEnable[3]?o("el-card",{staticStyle:{"margin-top":"15px"}},[o("h3",[t._v("解答题")]),o("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.openJoinDialog(4)}}},[t._v(" 添加小题 ")]),o("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-star-off"},on:{click:function(e){return t.batchScoreDialog(4)}}},[t._v(" 单题分值 ")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.quList[3]}},[o("el-table-column",{attrs:{label:"序号",type:"index",align:"center","show-overflow-tooltip":"",width:"50px"}}),o("el-table-column",{attrs:{prop:"content",label:"题目内容"}}),o("el-table-column",{attrs:{width:"120px",align:"center",label:"分值"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.score,callback:function(o){t.$set(e.row,"score",o)},expression:"scope.row.score"}})]}}],null,!1,1765368513)}),o("el-table-column",{attrs:{width:"120px",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(o){return t.removeQuItem(t.quList[3],e.$index)}}})]}}],null,!1,1051470719)})],1)],1):t._e()],1):t._e()],1):t._e(),2===t.step?o("el-card",{staticStyle:{"margin-top":"20px"}},[o("el-radio-group",{staticStyle:{"margin-bottom":"20px"},model:{value:t.postForm.openType,callback:function(e){t.$set(t.postForm,"openType",e)},expression:"postForm.openType"}},[o("el-radio",{attrs:{label:1,border:""}},[t._v("完全公开")]),o("el-radio",{attrs:{label:2,border:""}},[t._v("部门开放")]),o("el-radio",{attrs:{label:3,border:""}},[t._v("需要密码")])],1),1===t.postForm.openType?o("el-alert",{attrs:{title:"开放的，任何人都可以进行考试！",type:"warning"}}):t._e(),2===t.postForm.openType?o("div",[o("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),o("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],ref:"tree",attrs:{"empty-text":" ",data:t.treeData,"default-expand-all":"","show-checkbox":"","node-key":"id","default-checked-keys":t.postForm.departIds,props:t.defaultProps,"filter-node-method":t.filterNode},on:{"check-change":t.handleCheckChange}})],1):t._e(),o("div",[3===t.postForm.openType?o("el-alert",{attrs:{title:"半开放的，知道密码的人员都可以考试！",type:"warning"}}):t._e(),3===t.postForm.openType?o("el-input",{staticStyle:{width:"300px","margin-top":"20px"},attrs:{type:"password","show-password":!0,placeholder:"输入考试密码"},model:{value:t.postForm.password,callback:function(e){t.$set(t.postForm,"password",e)},expression:"postForm.password"}}):t._e()],1)],1):t._e(),3===t.step?o("el-card",{staticStyle:{"margin-top":"20px"}},[o("el-form",{ref:"postForm",attrs:{model:t.postForm,rules:t.rules,"label-position":"left","label-width":"120px"}},[o("el-form-item",{attrs:{label:"考试名称",prop:"title"}},[o("el-input",{model:{value:t.postForm.title,callback:function(e){t.$set(t.postForm,"title",e)},expression:"postForm.title"}})],1),o("el-form-item",{attrs:{label:"考试描述"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.postForm.content,callback:function(e){t.$set(t.postForm,"content",e)},expression:"postForm.content"}})],1),o("el-form-item",{attrs:{label:"总分数",prop:"totalScore"}},[o("el-input-number",{attrs:{value:t.postForm.totalScore,disabled:""}})],1),o("el-form-item",{attrs:{label:"及格分",prop:"qualifyScore"}},[o("el-input-number",{attrs:{max:t.postForm.totalScore},model:{value:t.postForm.qualifyScore,callback:function(e){t.$set(t.postForm,"qualifyScore",e)},expression:"postForm.qualifyScore"}})],1),o("el-form-item",{attrs:{label:"考试时长(分钟)",prop:"totalTime"}},[o("el-input-number",{model:{value:t.postForm.totalTime,callback:function(e){t.$set(t.postForm,"totalTime",e)},expression:"postForm.totalTime"}})],1),o("el-form-item",{attrs:{label:"是否限时"}},[o("el-checkbox",{model:{value:t.postForm.timeLimit,callback:function(e){t.$set(t.postForm,"timeLimit",e)},expression:"postForm.timeLimit"}})],1),t.postForm.timeLimit?o("el-form-item",{attrs:{label:"考试时间",prop:"totalTime"}},[o("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:t.dateValues,callback:function(e){t.dateValues=e},expression:"dateValues"}})],1):t._e()],1)],1):t._e(),o("qu-select-dialog",{attrs:{"dialog-show":t.quDialogShow,"qu-type":t.quDialogType,excludes:t.excludes},on:{select:t.handleQuSelected,close:t.handleQuClose}}),o("el-dialog",{attrs:{title:"批量设置分值",visible:t.scoreDialog,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(e){t.scoreDialog=e}}},[o("el-input",{model:{value:t.scoreBatch,callback:function(e){t.scoreBatch=e},expression:"scoreBatch"}}),o("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleBatchScore}},[t._v("确定设置")])],1)],1)},i=[],l=(o("ac6a"),o("955d")),r=o("9b73"),a=o("4a02"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:"选择试题",visible:t.dialogVisible,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[o("data-table",{ref:"pagingTable",attrs:{options:t.options,"list-query":t.listQuery},on:{"select-changed":t.handleSelected}},[o("template",{slot:"filter-content"},[o("el-row",[o("el-col",{attrs:{span:24}},[o("repo-select",{attrs:{multi:!0},model:{value:t.listQuery.params.repoIds,callback:function(e){t.$set(t.listQuery.params,"repoIds",e)},expression:"listQuery.params.repoIds"}}),o("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"题目内容"},model:{value:t.listQuery.params.content,callback:function(e){t.$set(t.listQuery.params,"content",e)},expression:"listQuery.params.content"}}),o("el-button",{staticClass:"filter-item",staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v(t._s(t.selectedLabel))])],1)],1)],1),o("template",{slot:"data-columns"},[o("el-table-column",{attrs:{label:"题目类型",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("quTypeFilter")(e.row.quType))+" ")]}}])}),o("el-table-column",{attrs:{label:"题目内容","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("router-link",{attrs:{to:{name:"UpdateQu",params:{id:e.row.id}}}},[t._v(" "+t._s(e.row.content)+" ")])]}}])}),o("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"180px"}})],1)],2)],1)},c=[],u=(o("c5f6"),o("7845")),p={name:"QuSelectDialog",components:{RepoSelect:a["a"],DataTable:u["a"]},props:{quType:Number,excludes:Array,dialogShow:{type:Boolean,default:!1}},data:function(){return{dialogVisible:!1,selectedLabel:"请勾选题目",listQuery:{current:1,size:6,params:{content:"",quType:"",repoIds:[],excludes:[]}},selectedList:[],options:{multi:!0,multiShow:!1,listUrl:"/exam/api/qu/qu/paging"}}},watch:{dialogShow:{handler:function(){this.dialogVisible=this.dialogShow},deep:!0},quType:{handler:function(){this.listQuery.params.quType=this.quType},deep:!0},excludes:{handler:function(){this.listQuery.params.excludes=this.excludes},deep:!0}},created:function(){this.dialogVisible=this.dialogShow,this.listQuery.params.quType=this.quType},methods:{handleSelected:function(t){this.selectedList=t.objs,this.selectedLabel="确认"+this.selectedList.length+"项"},handleClose:function(){this.$emit("update:dialogShow",!1),this.$emit("close",this.selectedList)},handleConfirm:function(){this.$emit("update:dialogShow",!1),this.$emit("select",this.selectedList)}}},d=p,m=(o("f1d2"),o("2877")),f=Object(m["a"])(d,s,c,!1,null,"65b71aba",null),b=f.exports,h={name:"ExamDetail",components:{QuSelectDialog:b,RepoSelect:a["a"]},data:function(){return{step:1,treeData:[],defaultProps:{label:"deptName"},filterText:"",treeLoading:!1,dateValues:[],quDialogShow:!1,quDialogType:1,excludes:[],scoreDialog:!1,scoreBatch:0,repoList:[],quList:[[],[],[],[]],quEnable:[!1,!1,!1,!1],postForm:{totalScore:0,repoList:[],quList:[],joinType:1,openType:1,departIds:[]},rules:{title:[{required:!0,message:"考试名称不能为空！"}],open:[{required:!0,message:"考试权限不能为空！"}],totalScore:[{required:!0,message:"考试分数不能为空！"}],qualifyScore:[{required:!0,message:"及格分不能为空！"}],totalTime:[{required:!0,message:"考试时间不能为空！"}],content:[{required:!0,message:"课程描述不能为空"}],ruleId:[{required:!0,message:"考试规则不能为空"}],password:[{required:!0,message:"考试口令不能为空！"}]}}},watch:{filterText:function(t){this.$refs.tree.filter(t)},dateValues:{handler:function(){this.postForm.startTime=this.dateValues[0],this.postForm.endTime=this.dateValues[1]}},quList:{handler:function(){var t=this;t.postForm.totalScore=0,t.postForm.quList=[],this.quList.forEach((function(e){e.forEach((function(e){t.postForm.totalScore+=parseInt(e.score),t.postForm.quList.push(e)}))}))},deep:!0},repoList:{handler:function(){var t=this;t.postForm.totalScore=0,this.repoList.forEach((function(e){t.postForm.totalScore+=e.radioCount*e.radioScore,t.postForm.totalScore+=e.multiCount*e.multiScore,t.postForm.totalScore+=e.judgeCount*e.judgeScore,t.postForm.totalScore+=e.saqCount*e.saqScore})),this.postForm.repoList=this.repoList},deep:!0}},created:function(){var t=this,e=this.$route.params.id;"undefined"!==typeof e&&this.fetchData(e),Object(r["c"])({}).then((function(e){t.treeData=e.data}))},methods:{quEnableChange:function(t,e){var o=t-1,n=this;!e&&this.quList[o].length>0&&this.$confirm("该大题已经做了详细配置，是否仍要移除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.quList[o]=[]})).catch((function(){var t=n.quEnable;t[o]=!0,n.quEnable=[t[0],t[1],t[2],t[3]]}))},nextStep:function(){var t=this;this.step<3?this.step+=1:this.$refs.postForm.validate((function(e){if(e)if(0!==t.postForm.totalScore){if(1===t.postForm.joinType)for(var o=0;o<t.postForm.repoList.length;o++){var n=t.postForm.repoList[o];if(!n.repoId)return void t.$notify({title:"提示信息",message:"考试题库选择不正确！",type:"warning",duration:2e3});if(n.radioCount>0&&0===n.radioScore||0===n.radioCount&&n.radioScore>0)return void t.$notify({title:"提示信息",message:"题库第：["+(o+1)+"]项存在无效的单选题配置！",type:"warning",duration:2e3});if(n.multiCount>0&&0===n.multiScore||0===n.multiCount&&n.multiScore>0)return void t.$notify({title:"提示信息",message:"题库第：["+(o+1)+"]项存在无效的多选题配置！",type:"warning",duration:2e3});if(n.judgeCount>0&&0===n.judgeScore||0===n.judgeCount&&n.judgeScore>0)return void t.$notify({title:"提示信息",message:"题库第：["+(o+1)+"]项存在无效的判断题配置！",type:"warning",duration:2e3});if(n.saqCount>0&&0===n.saqScore||0===n.saqCount&&n.saqScore>0)return void t.$notify({title:"提示信息",message:"题库第：["+(o+1)+"]项存在无效的简答题配置！",type:"warning",duration:2e3})}if(2===t.postForm.joinType){if(!t.postForm.quList||0===t.postForm.quList.length)return void t.$notify({title:"提示信息",message:"自由组卷至少要包含一个题目！",type:"warning",duration:2e3});for(var i=0;i<t.postForm.quList.length;i++)if(0===t.postForm.quList[i].score)return void t.$notify({title:"提示信息",message:"题目："+t.postForm.quList[i].content+"必须给予分值！",type:"warning",duration:2e3})}t.$confirm("确实要提交保存吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.submitForm()}))}else t.$notify({title:"提示信息",message:"考试规则设置不正确，请确认！",type:"warning",duration:2e3})}))},prevStep:function(){this.step-=1},openJoinDialog:function(t){this.quDialogType=t,this.quDialogShow=!0;var e=this.quDialogType-1,o=this;o.excludes=[],this.quList[e].forEach((function(t){o.excludes.push(t.quId)}))},removeQuItem:function(t,e){t.splice(e,1)},handleQuClose:function(){this.quDialogShow=!1},handleQuSelected:function(t){var e=this;1===this.quDialogType&&t.forEach((function(t){e.quList[0].push({quId:t.id,quType:t.quType,content:t.content,score:0})})),2===this.quDialogType&&t.forEach((function(t){e.quList[1].push({quId:t.id,quType:t.quType,content:t.content,score:0})})),3===this.quDialogType&&t.forEach((function(t){e.quList[2].push({quId:t.id,quType:t.quType,content:t.content,score:0})})),4===this.quDialogType&&t.forEach((function(t){e.quList[3].push({quId:t.id,quType:t.quType,content:t.content,score:0})})),this.quDialogShow=!1},batchScoreDialog:function(t){this.quDialogType=t,this.scoreDialog=!0},handleBatchScore:function(){var t=this,e=this.quDialogType-1;this.quList[e].forEach((function(e){e.score=t.scoreBatch})),this.scoreDialog=!1},handleCheckChange:function(){var t=this;this.postForm.departIds=[];var e=this.$refs.tree.getCheckedNodes();e.forEach((function(e){t.postForm.departIds.push(e.id)}))},joinTypeChane:function(t){var e=this;1===t&&this.quList.length>0&&this.$confirm("切换题库组卷将丢失自由组卷数据，是否要进行此操作？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.quList=[[],[],[],[]]})).catch((function(){e.postForm.joinType=2})),2===t&&this.repoList.length>0&&this.$confirm("切换自由组卷将丢失题库组卷数据，是否要进行此操作？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.repoList=[]})).catch((function(){e.postForm.joinType=1}))},handleAdd:function(){this.repoList.push({radioCount:0,radioScore:0,multiCount:0,multiScore:0,judgeCount:0,judgeScore:0,saqCount:0,saqScore:0})},removeItem:function(t){this.repoList.splice(t,1)},fetchData:function(t){var e=this,o=this;Object(l["a"])(t).then((function(t){e.postForm=t.data,e.dateValues[0]=e.postForm.startTime,e.dateValues[1]=e.postForm.endTime,2===e.postForm.joinType&&e.postForm.quList.forEach((function(t){var e=t.quType-1;o.quList[e].push(t),o.quEnable[e]=!0})),1===e.postForm.joinType&&(o.repoList=o.postForm.repoList)}))},submitForm:function(){var t=this;this.postForm.repoList=this.repoList,Object(l["c"])(this.postForm).then((function(){t.$notify({title:"成功",message:"考试保存成功！",type:"success",duration:2e3}),t.$router.push({name:"ListExam"})}))},filterNode:function(t,e){return!t||-1!==e.deptName.indexOf(t)}}},y=h,g=Object(m["a"])(y,n,i,!1,null,"3d7a7642",null);e["default"]=g.exports},"955d":function(t,e,o){"use strict";o.d(e,"a",(function(){return i})),o.d(e,"c",(function(){return l})),o.d(e,"b",(function(){return r}));var n=o("b775");function i(t){return Object(n["b"])("/exam/api/exam/exam/detail",{id:t})}function l(t){return Object(n["b"])("/exam/api/exam/exam/save",t)}function r(){return Object(n["b"])("/exam/api/exam/exam/paging",{current:1,size:100})}},"9b73":function(t,e,o){"use strict";o.d(e,"d",(function(){return i})),o.d(e,"c",(function(){return l})),o.d(e,"b",(function(){return r})),o.d(e,"a",(function(){return a})),o.d(e,"e",(function(){return s})),o.d(e,"f",(function(){return c}));var n=o("b775");function i(t){return Object(n["b"])("/exam/api/sys/depart/paging",t)}function l(t){return Object(n["b"])("/exam/api/sys/depart/tree",t)}function r(t){var e={id:t};return Object(n["b"])("/exam/api/sys/depart/detail",e)}function a(t){var e={ids:t};return Object(n["b"])("/exam/api/sys/depart/delete",e)}function s(t){return Object(n["b"])("/exam/api/sys/depart/save",t)}function c(t,e){var o={id:t,sort:e};return Object(n["b"])("/exam/api/sys/depart/sort",o)}},f1d2:function(t,e,o){"use strict";var n=o("39cf"),i=o.n(n);i.a}}]);